#
# $Id: Makefile.in,v 1.5 1999/12/28 12:02:24 kunishi Exp $
#

PKGNAME=	solpkg-0.1

LOCALBASE=	/usr/local
PKGBUILDDIR=	@solpkg_topdir@

CWD:sh=		pwd
BOOTSTRAPDIR=	${CWD}/bootstrap
MAKEFILEDIR=	${CWD}/mk
PKGDIR=		${CWD}/pkg
RELEASEDIR=	${CWD}/release
WRKDIR=		${CWD}/work

COMPRESS=	/usr/bin/compress
CP=		/usr/bin/cp
ENV=		/usr/bin/env
PKGMK=		/usr/bin/pkgmk
PKGTRANS=	/usr/bin/pkgtrans
MKDIR=		/usr/bin/mkdir -p
RM=		/usr/bin/rm
SED=		/usr/bin/sed
SH=		/bin/sh
TAR=		/usr/bin/tar

ARCH:sh=	/usr/bin/mach
OSREL:sh=	/usr/bin/uname -r

RELEASE_PKG_DIR=	/export/pub/Solaris/${ARCH}/${OSREL}
RELEASE_DATE:sh=	/usr/bin/date +%G%m%d

CORE_PACKAGES=	bmake-2.1.14.gz \
		gcc-2.8.1.gz \
		gmake-3.77.gz \
		gtar-1.12.gz \
		gzip-1.2.4 \
		libstdc++-2.8.1.1.gz \
		md5-1.0.gz \
		patch-2.5.gz \
		texinfo-3.12.gz \
		wget-1.5.3.gz

all:
	${MAKE} bootstrap

bootstrap::
	${ENV} TOPDIR=${CWD} ${SH} ${BOOTSTRAPDIR}/install-lukemftp.sh && \
	${ENV} TOPDIR=${CWD} ${SH} ${BOOTSTRAPDIR}/install-gcc.sh && \
	${ENV} TOPDIR=${CWD} ${SH} ${BOOTSTRAPDIR}/install-gmake.sh && \
	${ENV} TOPDIR=${CWD} ${SH} ${BOOTSTRAPDIRR}/install-bmake.sh

clean:
	${RM} -f config.cache config.log config.status
	cd mk && ${MAKE} clean
	${RM} -f ${MAKEFILEDIR}/port.mk ${MAKEFILEDIR}/solpkg.conf
	${RM} -f ${PKGDIR}/pkginfo ${PKGDIR}/prototype
	${RM} -rf ${WRKDIR}
	${RM} -f ${RELEASEDIR}/${PKGNAME}

distclean:	clean
	${RM} -f Makefile
	${RM} -rf ${RELEASEDIR}
